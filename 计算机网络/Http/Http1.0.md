## HTTP简介
HTTP协议是用于从WWW服务器传输超文本到本地浏览器的传送协议。它可以使浏览器更加高效，使网络传输减少。它不仅保证计算机正确快速的传输超文本文档，还确定传输文档中的哪一部分，以及哪部分内容首先显示(如文本先于图形)。
## 计算机相互之间的通信
TCP：传输控制协议，IP：网际协议
### IP:计算机之间的通信
IP协议是计算机用来相互识别的通信的一种机制，每台计算机都有一个IP，用来在Internet上标识这台计算机。IP负责在因特网上发送和接收数据包。通过IP，数据被分割为小的独立的包，并通过因特网在计算机之间传送。IP负责将每个包路由至它的目的地。

IP协议仅仅是允许计算机相互发消息，并不检查消息是否以发送的次序到达而且没有损坏(只检查关键的头数据)。为了提供消息检验功能，在IP协议的基础上设计了TCP。
### TCP:应用程序之间的通信
TCP确保数据包以正确的次序到达，并且尝试确认数据包的内容没有改变。TCP在IP地址之上引入了端口(port)，它允许计算机通过网络提供各种服务。一些端口号为不同的服务保留，而且这些端口号是众所周知的。

TCP用于从应用程序到网络的数据传输控制。TCP负责在数据传送之前将它们分割为IP包，然后在它们到达的时候将它们重组。

TCP负责应用软件和网络软件之间的通信。IP负责计算机之间的通信。TCP负责将数据分割并放入IP包，IP负责将包发送至接受者，传输过程中要经IP路由器负责根据通信量、网络中的错误或者其他参数来正确的寻址，然后在它们到达时重新组合它们。
![](http://oqnfoupsj.bkt.clouddn.com/17-8-18/36450672.jpg)
## HTTP请求响应模型
HTTP由请求和响应构成，是一个标准的客户端服务器模型(B/S)。HTTP协议永远都是客户端发起请求，服务端回送响应。

HTTP是一个无状态协议。无状态是指客户机(Web浏览器)和服务器之间不需要建立持久的连接，这意味着当一个客户端向服务器发出请求，然后服务器返回响应，连接就被关闭了，在服务器端不保留连接的有关信息。
## HTTP的工作过程
1. 地址解析：从中分解出协议名、主机名、端口、对象路径等部分,使用域名系统DNS解析域名，得到主机的IP地址。
2. 封装HTTP请求数据包
3. 封装成TCP包，建立TCP连接(TCP的三次握手)
4. 客户机发送请求命令(请求方式的格式为:统一资源标识符(URL)、协议版本号，后面是MIME信息包括请求修饰符、客户机信息和内容)
5. 服务器响应：格式为一个状态行，包括信息的协议版本号，一个成功或错误的代码，后面是MIME信息包括服务器信息、实体信息和可能的内容。(实体信息是服务器向浏览器发送头信息后，它会发送一个空白行来表示头信息的发送到此为结束，接着，他就以contentType应答头信息所描述的格式发送客户所请求的实际数据)
6. 服务器关闭TCP连接：一般情况下，一旦Web服务器向浏览器发送了请求数据，它就要关闭TCP连接，然后如果浏览器或服务器在其头信息加入了这行代码：Connection:keep-alive，TCP连接在发送后将仍然保持打开状态，于是，浏览器可以继续通过相同的连接发送请求。保持连接节省了为每个请求建立新连接所需的时间，还节约了网络带宽。
## HTTP协议栈中各层数据流
![](http://oqnfoupsj.bkt.clouddn.com/17-8-18/22932298.jpg)
客户机发起一次请求的过程：
客户机会将请求封装成HTTP数据包->封装成TCP数据包->封装成IP数据包->封装成数据帧->硬件将数据帧转换成bit流(二进制数据)->最后通过物理硬件(网卡芯片)发送到指定的地点->服务器硬件首先收到bit流->然后转换成IP数据包。于是通过IP协议解析成IP数据包，如果发现里面是TCP(UDP)数据包，就通过TCP(UDP)协议解析TCP(UDP)数据包，接着发现是http数据包就通过http协议再解析http数据包得到数据。
