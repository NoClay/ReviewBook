### 具有五层协议的体系结构
TCP/IP是一个四层的体系结构，它包含：应用层、运输层、网际层和网络接口层(用网际层这个名字是强调这一层是为了解决不同网络的互连问题)。从实质上讲，TCP/IP只有最上面的三层，因为下面的网络接口层并没有什么具体的内容。
![](http://oqnfoupsj.bkt.clouddn.com/17-8-6/52087323.jpg)

1. 应用层：直接为用户的应用进程提供服务。这里的进程就是指正在运行的程序。应用层的协议很多，例如：支持万维网应用的HTTP协议，支持电子邮件的SMTP协议，支持文件传送的FTP协议。

2. 运输层：运输层的任务就是负责向两个主机中进程之间的通信提供服务。由于一个主机可同时运行多个进程，因此运输层有复用和分用的功能。复用就是多个应用层进程可同时使用下面运输层的服务，分用则是运输层把收到的消息分别交付给上面运输层中相应的进程。运输层主要使用一下两种协议：
    * 传输控制协议TCP：面向连接的，数据传输的单位是报文段，能够提供可靠地交付。
    * 用户数据报协议UDP：无连接的，数据传输的单位是用户数据报，不保证提供可靠的交付，只能提供尽最大努力交付。

3. 网络层：网络层负责为分组交换网上的不同主机提供通信服务。在发送数据时，网络层把运输层产生的报文段或用户数据报封装成分组或包进行传送。在TCP/IP体系中，由于网络层使用IP协议，因此分组也叫IP数据报，或简称数据报。有一点需要注意，无论在哪一层传送的数据单元，习惯上都可以笼统的称为分组。网络层另外的一个任务就是要选择合适的路由，使源主机运输层所传下来的分组，能够通过网络中的路由器找到目的主机。因特网中主要的网络层协议是无连接的网际协议IP和许多种路由选择协议。因此因特网的网络层也叫网际层或IP层。

4. 数据链路层：在相邻的两个结点之间(主机和路由器之间或两个路由器之间)传送数据是直接传递的(点对点)。这时就需要使用专门的链路层协议。在两个相邻的结点之间传送数据时，数据链路层将网络层交下来的IP数据报组装成帧，在两个相邻结点间的链路上"透明"地传送帧中的数据。每一帧包括数据和必要的控制信息(如同步信息、地址信息、差错控制等)。典型的帧长是几百字节到一千多字节。“透明”是一个很重要的术语，它表示：某一个实际存在的事物看起来却好像不存在一样。"在数据链路层透明传送数据"表示无论什么样的比特组合的数据都能够通过这个数据链路层，因此，对所传送的数据来说，这些数据就看不见数据链路层。或者说，数据链路层对这些数据来说是透明的。在接收数据时，控制信息使接收端能够知道一个帧的从哪个比特开始到哪个比特结束。这样，数据链路层在收到一个帧以后，可从中提取出数据部分，上交给网络层。控制信息还使接收端能够检测到所收到的帧中有无差错。如发现有错，数据链路层就简单的丢弃了这个出了差错的帧，以免继续传送下去白白浪费网络资源。如果需要改正错误，就由传输层的TCP协议来完成。

5. 物理层：在物理层上所传数据的单位是比特。物理层的任务就是透明的传送比特流。物理层要考虑用多大的电压代表"1"或"0"，以及接收方如何识别发送方所发送的比特。物理层还要确定连接电缆的插头应该有多少根引脚以及各条引脚应如何连接。传递信息所用的一些物理媒介，如双绞线、同轴电缆、光缆、无线信道等，并不在物理层协议之内而是在物理层协议的下面，因此也有人把物理媒体当做第0层。
![](http://oqnfoupsj.bkt.clouddn.com/17-8-6/2954954.jpg)

从主机1的应用进程AP1向主机2的应用进程AP2传送数据。AP1先将其数据交给本主机的第五层(应用层)。第五层加上必要的控制信息H5就变成了下一层的数据单元。第四层(运输层)收到这个数据单元以后，加上本层的控制信息H4，再交给第3层(网络层)，成为第三层的数据单元。以此类推。不过到了第2层(数据链路层)后，控制信息分成两部分，分别加到本次数据单元的首部(H2)和尾部(T2),而第一层(物理层)由于是比特流的传送，所以不再加控制信息。请注意比特流应该从首部开始传送。当这一串比特流离开主机1经网络的物理媒体到达目的站主机2时，就从主机2的第一层上升到第五层。每一层根据控制信息进行必要的操作，然后将控制信息剥去，将该层剩下的数据单元上交给更高一层。最后，把应用进程AP1发送的数据交给目的站的应用进程AP2。

OSI参考模型把对等层次之间传送的数据单位称为该层的协议数据单元PDU。
